<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Illinois Weather Ticker</title>

  <style>
    :root{
      --h: 40px;
      --speed: 250s;          /* fallback; JS will override for consistent px/sec */
      --font: 15px;

      --bg: #0b2545;
      --fg: #ffffff;

      --label-bg: linear-gradient(90deg, #1e3a8a, #0f172a); /* default winter ops */
      --label-fg: #ffffff;
      --label-accent: #93c5fd; /* icy divider */
    }

    body{
      margin:0;
      background: var(--bg);
      color: var(--fg);
      font-family: Arial, sans-serif;
      overflow:hidden;
    }

    .wrap{
      height: var(--h);
      display:flex;
      align-items:center;
      overflow:hidden;
      position:relative;
    }

    .label{
      background: var(--label-bg);
      color: var(--label-fg);
      font-weight: 800;
      letter-spacing: .08em;
      padding: 0 14px;
      display:flex;
      align-items:center;
      white-space:nowrap;
      border-right: 3px solid var(--label-accent);
      text-transform: uppercase;
      height: 100%;
      font-size: 13px;
      user-select: none;
    }

    /* flashing effect (warnings) */
    .label.flash{
      animation: flash 1.2s ease-in-out infinite;
    }
    @keyframes flash{
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.25); }
    }

    .marquee{
      flex:1;
      overflow:hidden;
    }

    .ticker{
      white-space:nowrap;
      display:inline-block;
      padding-left:100%;
      animation: scroll var(--speed) linear infinite;
      font-size: var(--font);
      will-change: transform;
    }

    @keyframes scroll{
      from { transform: translateX(0); }
      to   { transform: translateX(-100%); }
    }

    .wrap:hover .ticker{
      animation-play-state: paused;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div id="label" class="label">WEATHER ADVISORY:</div>

    <!-- NEW: give marquee an id so JS can measure width -->
    <div id="marquee" class="marquee">
      <div id="ticker" class="ticker" aria-live="polite">Loading Illinois weather alertsâ€¦</div>
    </div>
  </div>

  <script>
    // =========================
    // CONFIG
    // =========================
    const NWS_URL = "https://api.weather.gov/alerts/active?area=IL";
    const REFRESH_MS = 5 * 60 * 1000; // 5 minutes
    const MAX_ITEMS = 10;

    // NEW: speed tuning via URL:
    //   ?pps=45  (slower)
    //   ?pps=55  (normal)
    //   ?pps
