<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Illinois Weather Ticker</title>

  <style>
    :root {
      --bg: #0b2545;
      --fg: #ffffff;
      --h: 40px;
      --speed: 75s;
      --font: 15px;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    .wrap {
      height: var(--h);
      display: flex;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    .ticker {
      white-space: nowrap;
      display: inline-block;
      padding-left: 100%;
      animation: scroll var(--speed) linear infinite;
      font-size: var(--font);
    }

    @keyframes scroll {
      from { transform: translateX(0); }
      to   { transform: translateX(-100%); }
    }

    .wrap:hover .ticker {
      animation-play-state: paused;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div id="ticker" class="ticker">
      Loading Illinois weather alertsâ€¦
    </div>
  </div>

  <script>
  // Official NWS Alerts API (Illinois)
  const url = "https://api.weather.gov/alerts/active?area=IL";

  function clean(txt) {
    return (txt || "").replace(/\s+/g, " ").trim();
  }

  fetch(url, {
    headers: {
      // NWS asks for a user agent; this helps reliability
      "User-Agent": "BThomas78 weather-ticker (GitHub Pages)",
      "Accept": "application/geo+json"
    }
  })
    .then(r => {
      if (!r.ok) throw new Error("NWS request failed: " + r.status);
      return r.json();
    })
    .then(data => {
      const features = data.features || [];

      if (!features.length) {
        document.getElementById("ticker").textContent =
          "No active Illinois weather alerts at this time.";
        return;
      }

      // Grab top N alert headlines
      const N = 8;
      const headlines = features.slice(0, N).map(f => {
        const p = f.properties || {};
        // headline is often best; fallback to event
        return clean(p.headline || p.event || "Weather Alert");
      });

      document.getElementById("ticker").textContent =
        headlines.join("  |  ");
    })
    .catch(err => {
      console.error(err);
      document.getElementById("ticker").textContent =
        "Weather service temporarily unavailable.";
    });
</script>

</body>
</html>

